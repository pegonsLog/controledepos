<div class="dashboard-wrapper animate-fade-in">
  <div class="dashboard-header">
    <div class="header-top">
      <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
      </svg>
      <div class="header-text">
        <h1>Dashboard de POs</h1>
        <p>Análise comparativa por regional</p>
      </div>
    </div>

    <div class="header-controls">
      <mat-form-field appearance="outline">
        <mat-label>Período de Análise</mat-label>
        <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
          <input matStartDate formControlName="start" placeholder="Data início" />
          <input matEndDate formControlName="end" placeholder="Data fim" (dateChange)="onDateChange()" />
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>

      <button class="btn-back" [routerLink]="['/menu']">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />
        </svg>
        Voltar ao Menu
      </button>
    </div>
  </div>

  <div class="charts-grid">
    <!-- POs Elaborados -->
    <div class="charts-row">
      <ng-container *ngFor="let region of regions">
        <div class="chart-card">
          <div class="chart-header">
            <svg class="chart-icon icon-elaborados" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h3>POs Elaborados</h3>
            <span class="region-badge">{{ region }}</span>
          </div>
          <div class="chart-content">
            <ngx-charts-bar-vertical [scheme]="colorScheme" [results]="dataByRegion[region].elaborados"
              [gradient]="gradient" [xAxis]="showXAxis" [yAxis]="showYAxis" [showDataLabel]="showDataLabel"
              [showXAxisLabel]="showXAxisLabel" [showYAxisLabel]="showYAxisLabel" [xAxisLabel]="'Mês'"
              [yAxisLabel]="'Quantidade'" [yScaleMin]="0" [yScaleMax]="yScaleMax">
            </ngx-charts-bar-vertical>
          </div>
        </div>
      </ng-container>
    </div>

    <!-- POs Arquivados -->
    <div class="charts-row">
      <ng-container *ngFor="let region of regions">
        <div class="chart-card">
          <div class="chart-header">
            <svg class="chart-icon icon-arquivados" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
            </svg>
            <h3>POs Arquivados</h3>
            <span class="region-badge">{{ region }}</span>
          </div>
          <div class="chart-content">
            <ngx-charts-bar-vertical [scheme]="colorScheme" [results]="dataByRegion[region].implantados"
              [gradient]="gradient" [xAxis]="showXAxis" [yAxis]="showYAxis" [showDataLabel]="showDataLabel"
              [showXAxisLabel]="showXAxisLabel" [showYAxisLabel]="showYAxisLabel" [xAxisLabel]="'Mês'"
              [yAxisLabel]="'Quantidade'" [yScaleMin]="0" [yScaleMax]="yScaleMax">
            </ngx-charts-bar-vertical>
          </div>
        </div>
      </ng-container>
    </div>

    <!-- Comparativo -->
    <div class="charts-row">
      <ng-container *ngFor="let region of regions">
        <div class="chart-card">
          <div class="chart-header">
            <svg class="chart-icon icon-comparativo" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z" />
            </svg>
            <h3>Elaborados vs Arquivados</h3>
            <span class="region-badge">{{ region }}</span>
          </div>
          <div class="chart-content">
            <ngx-charts-line-chart [scheme]="colorSchemeLine" [results]="dataByRegion[region].comparativo"
              [xAxis]="showXAxis" [yAxis]="showYAxis" [showXAxisLabel]="showXAxisLabel"
              [showYAxisLabel]="showYAxisLabel" [xAxisLabel]="'Mês'" [yAxisLabel]="'Quantidade'" [autoScale]="true">
            </ngx-charts-line-chart>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>